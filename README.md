# basic-tcp-ip-2024
IoT 개발자 과정 TCP/IP 리포지토리


## 1일차(2024-06-11)
- IPv4
    - 내 컴퓨터의 인터넷 주소
    - 8bit(1byte)가 4개 모여서 주소를 이룸(총 32bit)
    - 2011년 2월 4일부터 모든 IPv4의 주소가 소진되면서 IPv4의 할당이 중지되었다
- IPv6
    - IPv4의 제한된 주소 공간으로 주소가 거의 소진되자 대안으로 나온 프로토콜
    - 128비트의 주소 공간을 제공
    - 일반적으로 4자리의 16진수 숫자 8개로 표기하며 쌍점(:)으로 구분

- TCP (Transmission Control Protocol) 설명
    - OSI 네트워크 계층 모델 중 전송 계층에서 사용하는 프로토콜로 가상회선 방식으로 패킷을 교환함
    - 장치들 사이에 연결과 데이터의 전송/제어 기능을 통해서, 데이터 전송의 신뢰성을 보장
    - point to point 연결 방식으로 전이중/양방향에서 데이터 전송이 가능

    - TCP

    <img src="https://github.com/Hwangji99/basic-tcp-ip-2024/blob/main/images/ni001.png" width=600>


- 소말리아
    - 소 -> 소켓(socket) : 휴대폰 기기
        - 프로그램이 네트워크에서 데이터를 주고받을 수 있도록 네트워크 환경에 연결할 수 있게 만들어진 연결부
        - 입력 3개를 가진 함수
        - int 타입의 출력과 입력
        - 성공 시 파일 디스크립터, 실패 시 -1 반환
    - 말 -> 바인더(bind) : 개통을 위한 전화번호
        - 입력 3개를 가진 함수
        - int 타입의 출력과 입력
        - 성공 시 0, 실패 시 -1 반환
    - 리 -> 리슨(listen) : 개통이 완료된 상태
        - 입력 2개를 가진 함수
        - int 타입의 출력과 입력
        - 성공 시 0, 실패 시 -1 반환
    - 아 -> 엑셉트(accept) : 개통이 완료된 후 다른 상대방과 통화하는 것
        - 입력 3개를 가진 함수
        - 성공 시 파일 디스크립터, 실패 시 -1 반환


- 서버 프로그램 구현, 소켓 구현, 리눅스 실행

- 리눅스 기반 파일 조작하기
    - 파일 열기(open)
        - 2개의 입력값을 받고 int로 출력한다
        - 성공시 파일 디스크립터, 실패 시 -1 반환
        - path : 파일 이름을 나타내는 문자열의 주소 값 전달
        - flag : 파일의 오픈 모드 정보 전달

    - 파일 닫기(close)
        - 파일은 사용 후 반드시 닫아줘야 한다
        - 성공 시 0, 실패 시 -1 반환

    - 파일에 데이터 쓰기(write)
        - 성공 시 전달한 바이트 수, 실패 시 -1 반환
        - fd : 데이터 전송 대상을 나타내는 파일 디스크립터 전달
        - buf : 전송할 데이터가 저장된 버퍼의 주소 값 전달
        - nbytes : 전송할 데이터의 바이트 수 전달

    - 파일에 저장된 데이터 읽기(read)
        - 성공 시 수신한 바이트 수(단 파일의 끝을 만나면 0), 실패 시 -1 반환
        - fd : 데이터 수신 대상을 나타내는 파일 디스크립터 전달
        - buf : 수신한 데이터를 저장할 버퍼의 주소 값 전달
        - nbytes : 수신할 최대 바이트 수 전달

- 프로토콜(Protocol)
    - 대화에 필요한 통신규약
    - 쉽게 말해 서로 데이터를 주고받기 위해서 정의해 놓은 약속을 뜻함
    - 소켓의 생성
    - int socket(int domain, int type, int protocol):
        - 성공 시 파일 디스크립터, 실패 시 -1 반환
        - domain : 소켓이 사용할 프로토콜 체계(Protocol Family) 정보 전달
        - type : 소켓의 데이터 전송방식에 대한 정보 전달
        - protocol : 두 컴퓨터 간 통신에 사용되는 프로토콜 정보 전달
    - 프로토콜 체계
        - PF_INET : IPv4 인터넷 프로토콜 체계
        - PF_INET6 : IPv6 인터넷 프로토콜 체계
        - PF_LOCAL : 로컬 통신을 위한 UNIX 프로토콜 체계
        - PF_PACKET : Low Level 소켓을 위한 프로토콜 체계
        - PF_IPX : IPX 노벨 프로토콜 체계

    - 소켓의 타입
        - 연결지향형 소켓(SOCK_STREAM) -> TCP
            - 중간에 데이터가 소멸되지 않고 목적지로 전송된다
            - 전송 순서대로 데이터가 수신된다
            - 전송되는 데이터의 경계(Boundary)가 존재하지 않는다
        - 비연결지향형 소켓(SOCK_DGRAM) -> UDP
            - 전송된 순서에 상관없이 가장 빠른 전송을 지향한다
            - 전송된 데이터는 손실의 우려가 있고, 파손의 우려가 있다
            - 전송되는 데이터의 경계(Boundary)가 존재한다
            - 한번에 전송할 수 있는 데이터의 크기가 제한된다

- 주소체계와 데이터 정렬
    - 소켓에 할당되는 IP주소와 PORT번호
        - IP : 인터넷 상에서 데이터를 송수신할 목적으로 컴퓨터에게 부여하는 값
        - PORT : 컴퓨터에게 부여하는 값이 아닌, 프로그램상에서 생성되는 소켓을 구분하기 위해 소켓에 부여되는 번호

        - 클래스 별 네트워크 주소와 호스트 주소의 경계
            - 클래스 A의 첫 번째 바이트 범위 : 0 이상 127 이하
            - 클래스 B의 첫 번째 바이트 범위 : 128 이상 191 이하
            - 클래스 C의 첫 번째 바이트 범위 : 192 이상 223 이하
        - 다른 표현
            - 클래스 A의 첫 번째 비트는 항상 0으로 시작
            - 클래스 B의 첫 두 비트는 항상 10으로 시작
            - 클래스 C의 첫 세 비트는 항상 110으로 시작
        
    - IPv4 주소체계

    <img src="https://github.com/Hwangji99/basic-tcp-ip-2024/blob/main/images/ni002.png?raw=true" width=600>


    - 주소 정보의 표현
        - IPv4 기반의 주소표현을 위헌 구조체
        ```c
        struct sockaddr_in
        {
            sa_family_t     sin_family; // 주소체계(Address Family)
            uint16_t        sin_port;   // 16비트 TCP/UDP PORT번호
            struct in_addr  sin_addr    // 32비트 IP주소
            char            sin_zero[8] // 사용되지 않음
        }

        struct in_addr
        {
            in_addr_t       s_addr;     // 32비트 IPv4 인터넷 주소
        };
        ```

        - 멤버 sin_family
            - AF_INET, AF_INET6, AF_LOCAL
    
    - 네트워크 바이트 순서와 인터넷 주소 변환
        - 빅 엔디안 
            - 상위 바이트의 값을 작은 번지수(제일 왼쪽)에 저장하는 방식
            - 하위 바이트의 값을 큰 번지수(제일 오른쪽)에 저장하는 방식
        - 리틀 엔디안
            - 상위 바이트의 값을 큰 번지수(제일 오른쪽)에 저장하는 방식
            - 하위 바이트의 값을 작은 번지수(제일 왼쪽)에 저장하는 방식


        <img src="https://github.com/Hwangji99/basic-tcp-ip-2024/blob/main/images/ni003.png" width=600>


    - 인터넷 주소의 초기화와 할당

## 2일차(2024-06-12)



## 3일차(2024-06-13)
